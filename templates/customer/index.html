{% extends 'base.html' %}

{% block content %}
<!-- Hero Slider Section -->
<div class="relative h-[600px] w-full overflow-hidden group">
    <!-- Slides Container -->
    <div id="slider-container" class="flex h-full transition-transform duration-500 ease-out">
        {% for slide in data.hero_slides %}
        <div class="w-full h-full flex-shrink-0 relative bg-cover bg-center"
            style="background-image: url('{{ slide.bg_image }}');">
            <div class="absolute inset-0 bg-black bg-opacity-40"></div>

            <!-- Slide Content -->
            <div
                class="relative container mx-auto px-4 h-full flex flex-col md:flex-row items-center justify-between text-white gap-4 md:gap-16">
                <!-- Left: Text -->
                <div class="flex-1 min-w-0 z-10 text-center md:text-left pl-4 md:pl-8 max-w-2xl">
                    <h1
                        class="text-3xl md:text-5xl font-bold mb-6 whitespace-pre-line leading-tight text-shadow break-keep animate-fade-in-up">
                        {{ slide.title }}</h1>
                    <div class="flex flex-wrap justify-center md:justify-start gap-2 text-sm md:text-base opacity-90">
                        {% for tag in slide.hashtags %}
                        <span
                            class="px-3 py-1 border border-white rounded-full bg-white bg-opacity-10 backdrop-blur-sm">{{
                            tag }}</span>
                        {% endfor %}
                    </div>
                </div>

                <!-- Right: Cards -->
                <div class="hidden md:flex gap-4 flex-none z-10 pr-4 md:pr-8">
                    {% for card in slide.cards %}
                    <div
                        class="bg-white rounded-xl shadow-2xl overflow-hidden w-64 text-gray-800 transform hover:-translate-y-2 transition-transform duration-300">
                        <img src="{{ card.image }}" alt="{{ card.title }}" class="w-full h-40 object-cover">
                        <div class="p-4">
                            <div class="flex gap-1 mb-2">
                                {% for tag in card.tags %}
                                <span
                                    class="text-[10px] border border-blue-300 text-blue-500 px-1.5 py-0.5 rounded font-medium">{{
                                    tag }}</span>
                                {% endfor %}
                            </div>
                            <h3 class="text-sm font-bold truncate mb-2">{{ card.title }}</h3>
                            <div class="text-xs text-gray-400 line-through">{{ card.original_price }}원</div>
                            <div class="flex justify-between items-end">
                                <span class="text-red-500 font-bold text-base">{{ card.discount }}</span>
                                <span class="font-bold text-lg">{{ card.price }}원~</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Slider Controls -->
    <button id="prev-slide"
        class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-30 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-opacity-50 transition-all opacity-0 group-hover:opacity-100">
        <i class="fa-solid fa-chevron-left text-xl"></i>
    </button>
    <button id="next-slide"
        class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-30 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-opacity-50 transition-all opacity-0 group-hover:opacity-100">
        <i class="fa-solid fa-chevron-right text-xl"></i>
    </button>

    <!-- Dots -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex gap-3 z-20">
        {% for i in range(data.hero_slides|length) %}
        <button class="slider-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-all"
            data-index="{{ i }}"></button>
        {% endfor %}
    </div>
</div>

<!-- Icon Navigation (Placed Immediately Below Hero) -->
<div class="bg-white border-b border-gray-100">
    <div class="container mx-auto px-4 py-10">
        <div class="flex flex-nowrap justify-start md:justify-center gap-4 md:gap-8 overflow-x-auto no-scrollbar pb-2">
            {% for icon in data.icons %}
            <div class="flex flex-col items-center group cursor-pointer">
                <div
                    class="w-14 h-14 md:w-16 md:h-16 rounded-2xl bg-gray-50 flex items-center justify-center text-gray-500 group-hover:bg-sky-500 group-hover:text-white transition-all duration-300 shadow-sm group-hover:shadow-lg group-hover:-translate-y-1">
                    <i class="{{ icon.icon }} text-2xl md:text-3xl"></i>
                </div>
                <span class="mt-3 text-xs md:text-sm font-medium text-gray-600 group-hover:text-sky-600">{{ icon.label
                    }}</span>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Section A: Travelers' Choice (Drag-to-Scroll) -->
<div class="container mx-auto px-4 py-12">
    <div class="flex justify-between items-end mb-6">
        <h2 class="text-2xl font-bold text-gray-900">여행자들이 선호하는 여행지</h2>
        <a href="#" class="text-sm text-gray-500 hover:text-sky-600">더보기 <i
                class="fa-solid fa-chevron-right text-xs"></i></a>
    </div>

    <!-- Scrollable Container -->
    <div class="drag-scroll h-[520px] overflow-y-auto no-scrollbar pb-4 -mx-2 px-2">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-5">
            {% for item in data.products_a %}
            <div
                class="bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer group">
                <div class="relative overflow-hidden rounded-t-xl">
                    <img src="{{ item.image }}" alt="{{ item.title }}"
                        class="w-full h-48 object-cover transform group-hover:scale-110 transition-transform duration-500 pointer-events-none">
                    <div
                        class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity pointer-events-none">
                    </div>
                    <button
                        class="absolute top-3 right-3 w-9 h-9 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-red-500 shadow-md pointer-events-auto z-10">
                        <i class="fa-regular fa-heart"></i>
                    </button>
                </div>
                <div class="p-5">
                    <div class="flex gap-1 mb-2 flex-wrap">
                        {% for tag in item.tags %}
                        <span class="text-[10px] bg-gray-50 text-gray-600 px-2 py-1 rounded-md font-medium">{{ tag
                            }}</span>
                        {% endfor %}
                    </div>
                    <h3
                        class="text-base font-bold line-clamp-2 mb-3 h-12 leading-snug group-hover:text-sky-600 transition-colors">
                        {{ item.title }}</h3>
                    <div class="text-xs text-gray-400 line-through mb-1">{{ item.original_price }}원</div>
                    <div class="flex items-baseline gap-2">
                        <span class="text-red-500 font-bold text-xl">{{ item.discount }}</span>
                        <span class="font-bold text-2xl text-gray-900">{{ item.price }}<span
                                class="text-sm font-normal text-gray-600">원~</span></span>
                    </div>
                </div>
            </div>
            {% endfor %}
            <!-- Duplicate content -->
            {% for item in data.products_a %}
            <div
                class="bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer group">
                <div class="relative overflow-hidden rounded-t-xl">
                    <img src="{{ item.image }}" alt="{{ item.title }}"
                        class="w-full h-48 object-cover transform group-hover:scale-110 transition-transform duration-500 pointer-events-none">
                    <div
                        class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity pointer-events-none">
                    </div>
                    <button
                        class="absolute top-3 right-3 w-9 h-9 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-red-500 shadow-md pointer-events-auto z-10">
                        <i class="fa-regular fa-heart"></i>
                    </button>
                </div>
                <div class="p-5">
                    <div class="flex gap-1 mb-2 flex-wrap">
                        {% for tag in item.tags %}
                        <span class="text-[10px] bg-gray-50 text-gray-600 px-2 py-1 rounded-md font-medium">{{ tag
                            }}</span>
                        {% endfor %}
                    </div>
                    <h3
                        class="text-base font-bold line-clamp-2 mb-3 h-12 leading-snug group-hover:text-sky-600 transition-colors">
                        {{ item.title }}</h3>
                    <div class="text-xs text-gray-400 line-through mb-1">{{ item.original_price }}원</div>
                    <div class="flex items-baseline gap-2">
                        <span class="text-red-500 font-bold text-xl">{{ item.discount }}</span>
                        <span class="font-bold text-2xl text-gray-900">{{ item.price }}<span
                                class="text-sm font-normal text-gray-600">원~</span></span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Promo Banner -->
<div class="relative w-full py-20 md:py-28 bg-cover bg-center my-12"
    style="background-image: url('{{ data.promo.bg_image }}');">
    <div class="absolute inset-0 bg-gradient-to-r from-sky-900 to-blue-900 bg-opacity-80"></div>
    <div class="container mx-auto px-4 relative flex flex-col md:flex-row items-center justify-between gap-10">
        <div class="text-white max-w-xl">
            <span class="inline-block px-3 py-1 border border-white rounded-full text-xs font-bold mb-4">SPECIAL
                OFFER</span>
            <h2 class="text-3xl md:text-4xl font-bold mb-6 leading-tight">{{ data.promo.title }}</h2>
            <div class="flex flex-wrap gap-3">
                {% for keyword in data.promo.keywords %}
                <button
                    class="px-5 py-2 rounded-full bg-white bg-opacity-10 hover:bg-white hover:text-sky-900 transition-all backdrop-blur-sm text-sm font-medium">
                    {{ keyword }}
                </button>
                {% endfor %}
            </div>
        </div>

        <!-- Featured Promo Card -->
        <div
            class="bg-white rounded-2xl shadow-2xl overflow-hidden w-full md:w-96 max-w-sm transform hover:scale-105 transition-transform duration-300">
            <div class="relative">
                <img src="{{ data.promo.card.image }}" alt="Promo" class="w-full h-52 object-cover">
                <div class="absolute top-4 left-4 flex gap-2">
                    <span class="bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded">특가</span>
                    <span class="bg-gray-800 text-white text-[10px] font-bold px-2 py-1 rounded">BEST</span>
                </div>
            </div>
            <div class="p-6">
                <h3 class="font-bold text-lg mb-2 line-clamp-1">{{ data.promo.card.title }}</h3>
                <p class="text-sm text-gray-500 mb-4 line-clamp-2">{{ data.promo.card.desc }}</p>
                <div class="flex justify-between items-end border-t border-gray-100 pt-4">
                    <div>
                        <div class="flex items-center gap-2">
                            <span class="text-red-500 font-bold text-xl">{{ data.promo.card.discount }}</span>
                            <span class="text-xs text-gray-400 line-through">{{ data.promo.card.original_price }}</span>
                        </div>
                    </div>
                    <span class="font-bold text-2xl">{{ data.promo.card.price }}<span
                            class="text-sm font-normal">원~</span></span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Section B: Travel Benefits Zone (Expanded) -->
<div class="container mx-auto px-4 py-12 mb-12">
    <div class="flex justify-between items-end mb-6">
        <h2 class="text-2xl font-bold text-gray-900">놓치면 후회할 여행혜택</h2>
        <a href="#" class="text-sm text-gray-500 hover:text-sky-600">더보기 <i
                class="fa-solid fa-chevron-right text-xs"></i></a>
    </div>
    <!-- Expanded Grid (No Scroll) -->
    <div class="-mx-2 px-2">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-5">
            {% for item in data.products_b %}
            <div
                class="bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer group">
                <div class="relative overflow-hidden rounded-t-xl">
                    <img src="{{ item.image }}" alt="{{ item.title }}"
                        class="w-full h-48 object-cover transform group-hover:scale-110 transition-transform duration-500 pointer-events-none">
                    <div
                        class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity pointer-events-none">
                    </div>
                    <button
                        class="absolute top-3 right-3 w-9 h-9 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-red-500 shadow-md pointer-events-auto z-10">
                        <i class="fa-regular fa-heart"></i>
                    </button>
                </div>
                <div class="p-5">
                    <div class="flex gap-1 mb-2 flex-wrap">
                        {% for tag in item.tags %}
                        <span class="text-[10px] border border-sky-200 text-sky-600 px-2 py-1 rounded-md font-medium">{{
                            tag }}</span>
                        {% endfor %}
                    </div>
                    <h3
                        class="text-base font-bold line-clamp-2 mb-3 h-12 leading-snug group-hover:text-sky-600 transition-colors">
                        {{ item.title }}</h3>
                    <div class="text-xs text-gray-400 line-through mb-1">{{ item.original_price }}원</div>
                    <div class="flex items-baseline gap-2">
                        <span class="text-sky-500 font-bold text-xl">{{ item.discount }}</span>
                        <span class="font-bold text-2xl text-gray-900">{{ item.price }}<span
                                class="text-sm font-normal text-gray-600">원~</span></span>
                    </div>
                </div>
            </div>
            {% endfor %}
            <!-- Duplicate content -->
            {% for item in data.products_b %}
            <div
                class="bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer group">
                <div class="relative overflow-hidden rounded-t-xl">
                    <img src="{{ item.image }}" alt="{{ item.title }}"
                        class="w-full h-48 object-cover transform group-hover:scale-110 transition-transform duration-500 pointer-events-none">
                    <div
                        class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity pointer-events-none">
                    </div>
                    <button
                        class="absolute top-3 right-3 w-9 h-9 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-red-500 shadow-md pointer-events-auto z-10">
                        <i class="fa-regular fa-heart"></i>
                    </button>
                </div>
                <div class="p-5">
                    <div class="flex gap-1 mb-2 flex-wrap">
                        {% for tag in item.tags %}
                        <span class="text-[10px] border border-sky-200 text-sky-600 px-2 py-1 rounded-md font-medium">{{
                            tag }}</span>
                        {% endfor %}
                    </div>
                    <h3
                        class="text-base font-bold line-clamp-2 mb-3 h-12 leading-snug group-hover:text-sky-600 transition-colors">
                        {{ item.title }}</h3>
                    <div class="text-xs text-gray-400 line-through mb-1">{{ item.original_price }}원</div>
                    <div class="flex items-baseline gap-2">
                        <span class="text-sky-500 font-bold text-xl">{{ item.discount }}</span>
                        <span class="font-bold text-2xl text-gray-900">{{ item.price }}<span
                                class="text-sm font-normal text-gray-600">원~</span></span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Slider Script -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('slider-container');
        const slides = container.children;
        const prevBtn = document.getElementById('prev-slide');
        const nextBtn = document.getElementById('next-slide');
        const dots = document.querySelectorAll('.slider-dot');
        let currentIndex = 0;
        const totalSlides = slides.length;
        let interval;

        function updateSlider() {
            container.style.transform = `translateX(-${currentIndex * 100}%)`;

            // Update dots
            dots.forEach((dot, index) => {
                if (index === currentIndex) {
                    dot.classList.remove('bg-opacity-50');
                    dot.classList.add('bg-opacity-100', 'scale-125');
                } else {
                    dot.classList.add('bg-opacity-50');
                    dot.classList.remove('bg-opacity-100', 'scale-125');
                }
            });
        }

        function nextSlide() {
            currentIndex = (currentIndex + 1) % totalSlides;
            updateSlider();
        }

        function prevSlide() {
            currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
            updateSlider();
        }

        function startAutoPlay() {
            interval = setInterval(nextSlide, 5000);
        }

        function stopAutoPlay() {
            clearInterval(interval);
        }

        // Event Listeners
        nextBtn.addEventListener('click', () => {
            stopAutoPlay();
            nextSlide();
            startAutoPlay();
        });

        prevBtn.addEventListener('click', () => {
            stopAutoPlay();
            prevSlide();
            startAutoPlay();
        });

        dots.forEach(dot => {
            dot.addEventListener('click', (e) => {
                stopAutoPlay();
                currentIndex = parseInt(e.target.dataset.index);
                updateSlider();
                startAutoPlay();
            });
        });

        // Initialize
        updateSlider();
        startAutoPlay();
    });
</script>

<style>
    @keyframes fade-in-up {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in-up {
        animation: fade-in-up 0.8s ease-out forwards;
    }
</style>
{% endblock %}